#!/bin/sh
set -e

echo "ğŸ” Running pre-commit checks..."
echo "âš ï¸  ZERO TOLERANCE POLICY: All tests must pass before commit!"

echo "1. Running unit tests..."
NODE_OPTIONS='--experimental-vm-modules --max-old-space-size=4096' pnpm jest --config jest.unit.config.js --ci --watchAll=false

echo "âœ… Unit tests passed!"

echo "2. Running integration tests..."
NODE_OPTIONS='--experimental-vm-modules --max-old-space-size=4096' pnpm jest --config jest.integration.config.js --ci --watchAll=false

echo "âœ… Integration tests passed!"

echo "3. Running build check..."
pnpm build

echo "âœ… Build check passed!"

echo "ğŸ‰ All checks passed! Commit approved."